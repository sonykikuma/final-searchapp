{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","redditapi","results","output","forEach","post","image","preview","images","source","url","title","truncateString","selftext","subreddit","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","myString","limit","shortened","indexOf","substring"],"mappings":"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","file":"parcel project.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export default {\r\n  search: function (searchTerm, searchLimit, sortBy) {\r\n    // console.log(\"search....\");\r\n    //return (\r\n    // fetch(\r\n    // `http://www.reddit.com/r/pics/.json?jsonp=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`\r\n    //)\r\n    return fetch(\r\n      `http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => data.data.children.map((data) => data.data))\r\n      .catch((err) => console.log(err));\r\n    //);\r\n  },\r\n};\r\n","import redditapi from \"./redditapi\";\r\n\r\nconst searchForm = document.getElementById(\"search-form\");\r\nconst searchInput = document.getElementById(\"search-input\");\r\n\r\nsearchForm.addEventListener(\"submit\", (e) => {\r\n  const searchTerm = searchInput.value;\r\n  console.log(searchTerm);\r\n\r\n  const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n  console.log(sortBy);\r\n\r\n  const searchLimit = document.getElementById(\"limit\").value;\r\n  console.log(searchLimit);\r\n\r\n  if (searchTerm === \"\") {\r\n    showMessage(\"Please add a search term\", \" alert - danger\");\r\n  }\r\n\r\n  searchInput.value = \"\";\r\n\r\n  redditapi.search(searchTerm, searchLimit, sortBy).then((results) => {\r\n    console.log(results);\r\n    let output = '<div class=\"card-columns\">';\r\n    results.forEach(function (post) {\r\n      let image = post.preview\r\n        ? post.preview.images[0].source.url\r\n        : \"https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg\";\r\n\r\n      output += `\r\n        <div class =\"card\" >\r\n        <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n        <div class =\"card-body\">\r\n        <h5 class=\"card-title\">${post.title}</h5>\r\n        <p class=\"card=text\">${truncateString(post.selftext, 100)}</p>\r\n        <a href =\"${\r\n          post.url\r\n        }\" target=\"_ blank\" class =\"btn btn-primary\">Read more</a>\r\n        <hr>\r\n        <span class =\"badge badge-secondary\">Subreddit: ${post.subreddit}</span>\r\n        \r\n        </div>\r\n        </div>\r\n        `;\r\n    });\r\n    output += \"</div>\";\r\n    document.getElementById(\"results\").innerHTML = output;\r\n  });\r\n\r\n  e.preventDefault();\r\n});\r\n\r\nfunction showMessage(message, className) {\r\n  const div = document.createElement(\"div\");\r\n  div.className = `alert ${className}`;\r\n  div.appendChild(document.createTextNode(message));\r\n\r\n  const searchContainer = document.getElementById(\"search-container\");\r\n  const search = document.getElementById(\"search\");\r\n\r\n  searchContainer.insertBefore(div, search);\r\n  setTimeout(function () {\r\n    document.querySelector(\".alert\").remove();\r\n  }, 3000);\r\n}\r\n\r\nfunction truncateString(myString, limit) {\r\n  const shortened = myString.indexOf(\" \", limit);\r\n  if (shortened == -1) return myString;\r\n  return myString.substring(0, shortened);\r\n}\r\n"]}